!function(e){var n=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){!function(e,n){if(!x[e]||!b[e])return;for(var t in b[e]=!1,n)Object.prototype.hasOwnProperty.call(n,t)&&(v[t]=n[t]);0==--y&&0===m&&D()}(e,t),n&&n(e,t)};var t,r=!0,i="74f4d0ba223a1a94e36c",o=1e4,c={},d=[],a=[];function s(e){var n=k[e];if(!n)return I;var r=function(r){return n.hot.active?(k[r]?-1===k[r].parents.indexOf(e)&&k[r].parents.push(e):(d=[e],t=r),-1===n.children.indexOf(r)&&n.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),d=[]),I(r)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return I[e]},set:function(n){I[e]=n}}};for(var o in I)Object.prototype.hasOwnProperty.call(I,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,i(o));return r.e=function(e){return"ready"===p&&h("prepare"),m++,I.e(e).then(n,function(e){throw n(),e});function n(){m--,"prepare"===p&&(g[e]||_(e),0===m&&0===y&&D())}},r.t=function(e,n){return 1&n&&(e=r(e)),I.t(e,-2&n)},r}function l(e){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:t!==e,active:!0,accept:function(e,t){if(void 0===e)n._selfAccepted=!0;else if("function"==typeof e)n._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)n._acceptedDependencies[e[r]]=t||function(){};else n._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)n._declinedDependencies[e[t]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=n._disposeHandlers.indexOf(e);t>=0&&n._disposeHandlers.splice(t,1)},check:O,apply:j,status:function(e){if(!e)return p;u.push(e)},addStatusHandler:function(e){u.push(e)},removeStatusHandler:function(e){var n=u.indexOf(e);n>=0&&u.splice(n,1)},data:c[e]};return t=void 0,n}var u=[],p="idle";function h(e){p=e;for(var n=0;n<u.length;n++)u[n].call(null,e)}var f,v,w,y=0,m=0,g={},b={},x={};function E(e){return+e+""===e?+e:e}function O(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return r=e,h("check"),(n=o,n=n||1e4,new Promise(function(e,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var r=new XMLHttpRequest,o=I.p+""+i+".hot-update.json";r.open("GET",o,!0),r.timeout=n,r.send(null)}catch(e){return t(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)t(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)t(new Error("Manifest request to "+o+" failed."));else{try{var n=JSON.parse(r.responseText)}catch(e){return void t(e)}e(n)}}})).then(function(e){if(!e)return h("idle"),null;b={},g={},x=e.c,w=e.h,h("prepare");var n=new Promise(function(e,n){f={resolve:e,reject:n}});v={};return _(0),"prepare"===p&&0===m&&0===y&&D(),n});var n}function _(e){x[e]?(b[e]=!0,y++,function(e){var n=document.createElement("script");n.charset="utf-8",n.src=I.p+""+e+"."+i+".hot-update.js",document.head.appendChild(n)}(e)):g[e]=!0}function D(){h("ready");var e=f;if(f=null,e)if(r)Promise.resolve().then(function(){return j(r)}).then(function(n){e.resolve(n)},function(n){e.reject(n)});else{var n=[];for(var t in v)Object.prototype.hasOwnProperty.call(v,t)&&n.push(E(t));e.resolve(n)}}function j(n){if("ready"!==p)throw new Error("apply() is only allowed in ready status");var t,r,o,a,s;function l(e){for(var n=[e],t={},r=n.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var i=r.pop(),o=i.id,c=i.chain;if((a=k[o])&&!a.hot._selfAccepted){if(a.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:o};if(a.hot._main)return{type:"unaccepted",chain:c,moduleId:o};for(var d=0;d<a.parents.length;d++){var s=a.parents[d],l=k[s];if(l){if(l.hot._declinedDependencies[o])return{type:"declined",chain:c.concat([s]),moduleId:o,parentId:s};-1===n.indexOf(s)&&(l.hot._acceptedDependencies[o]?(t[s]||(t[s]=[]),u(t[s],[o])):(delete t[s],n.push(s),r.push({chain:c.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:e,outdatedModules:n,outdatedDependencies:t}}function u(e,n){for(var t=0;t<n.length;t++){var r=n[t];-1===e.indexOf(r)&&e.push(r)}}n=n||{};var f={},y=[],m={},g=function(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")};for(var b in v)if(Object.prototype.hasOwnProperty.call(v,b)){var O;s=E(b);var _=!1,D=!1,j=!1,H="";switch((O=v[b]?l(s):{type:"disposed",moduleId:b}).chain&&(H="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":n.onDeclined&&n.onDeclined(O),n.ignoreDeclined||(_=new Error("Aborted because of self decline: "+O.moduleId+H));break;case"declined":n.onDeclined&&n.onDeclined(O),n.ignoreDeclined||(_=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+H));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(O),n.ignoreUnaccepted||(_=new Error("Aborted because "+s+" is not accepted"+H));break;case"accepted":n.onAccepted&&n.onAccepted(O),D=!0;break;case"disposed":n.onDisposed&&n.onDisposed(O),j=!0;break;default:throw new Error("Unexception type "+O.type)}if(_)return h("abort"),Promise.reject(_);if(D)for(s in m[s]=v[s],u(y,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,s)&&(f[s]||(f[s]=[]),u(f[s],O.outdatedDependencies[s]));j&&(u(y,[O.moduleId]),m[s]=g)}var P,M=[];for(r=0;r<y.length;r++)s=y[r],k[s]&&k[s].hot._selfAccepted&&M.push({module:s,errorHandler:k[s].hot._selfAccepted});h("dispose"),Object.keys(x).forEach(function(e){!1===x[e]&&function(e){delete installedChunks[e]}(e)});for(var A,C,V=y.slice();V.length>0;)if(s=V.pop(),a=k[s]){var T={},S=a.hot._disposeHandlers;for(o=0;o<S.length;o++)(t=S[o])(T);for(c[s]=T,a.hot.active=!1,delete k[s],delete f[s],o=0;o<a.children.length;o++){var L=k[a.children[o]];L&&((P=L.parents.indexOf(s))>=0&&L.parents.splice(P,1))}}for(s in f)if(Object.prototype.hasOwnProperty.call(f,s)&&(a=k[s]))for(C=f[s],o=0;o<C.length;o++)A=C[o],(P=a.children.indexOf(A))>=0&&a.children.splice(P,1);for(s in h("apply"),i=w,m)Object.prototype.hasOwnProperty.call(m,s)&&(e[s]=m[s]);var N=null;for(s in f)if(Object.prototype.hasOwnProperty.call(f,s)&&(a=k[s])){C=f[s];var U=[];for(r=0;r<C.length;r++)if(A=C[r],t=a.hot._acceptedDependencies[A]){if(-1!==U.indexOf(t))continue;U.push(t)}for(r=0;r<U.length;r++){t=U[r];try{t(C)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:s,dependencyId:C[r],error:e}),n.ignoreErrored||N||(N=e)}}}for(r=0;r<M.length;r++){var q=M[r];s=q.module,d=[s];try{I(s)}catch(e){if("function"==typeof q.errorHandler)try{q.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:t,originalError:e}),n.ignoreErrored||N||(N=t),N||(N=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:s,error:e}),n.ignoreErrored||N||(N=e)}}return N?(h("fail"),Promise.reject(N)):(h("idle"),new Promise(function(e){e(y)}))}var k={};function I(n){if(k[n])return k[n].exports;var t=k[n]={i:n,l:!1,exports:{},hot:l(n),parents:(a=d,d=[],a),children:[]};return e[n].call(t.exports,t,t.exports,s(n)),t.l=!0,t.exports}I.m=e,I.c=k,I.d=function(e,n,t){I.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,n){if(1&n&&(e=I(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(I.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)I.d(t,r,function(n){return e[n]}.bind(null,r));return t},I.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(n,"a",n),n},I.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},I.p="",I.h=function(){return i},s(1)(I.s=1)}([function(e,n,t){e.exports=t.p+"assets/style.css"},function(e,n,t){"use strict";t.r(n);t(0);var r="\nvar active = null;\n\nclass Animated {\n    constructor(world) {\n        this.world = world;\n        var outer = window.__sandbox\n            ? window.__sandbox.output.div\n            : document.body;\n\n\n        var doc = outer.ownerDocument;\n        var node = outer.appendChild(doc.createElement('div'));\n        node.style.cssText =\n            'position: relative; width: intrinsic; width: fit-content;';\n        this.pre = node.appendChild(doc.createElement('pre'));\n        this.pre.appendChild(doc.createTextNode(world.toString()));\n        this.button = node.appendChild(doc.createElement('div'));\n        this.button.style.cssText =\n            'position: absolute; bottom: 8px; right: -4.5em; color: white; font-family: tahoma, arial; ' +\n            'background: #4ab; cursor: pointer; border-radius: 18px; font-size: 70%; width: 3.5em; text-align: center;';\n        this.button.innerHTML = 'stop';\n        var self = this;\n        this.button.addEventListener('click', () => {\n            self.clicked();\n        });\n        this.disabled = false;\n        if (active) active.disable();\n        active = this;\n        this.interval = setInterval(() => {\n            self.tick();\n        }, 333);\n    }\n    clicked() {\n        if (this.disabled) return;\n        if (this.interval) {\n            clearInterval(this.interval);\n            this.interval = null;\n            this.button.innerHTML = 'start';\n        } else {\n            var self = this;\n            this.interval = setInterval(() => {\n                self.tick();\n            }, 333);\n            this.button.innerHTML = 'stop';\n        }\n    }\n\n    tick() {\n        this.world.turn();\n        this.pre.removeChild(this.pre.firstChild);\n        this.pre.appendChild(\n            this.pre.ownerDocument.createTextNode(this.world.toString())\n        );\n    }\n\n    disable() {\n        this.disabled = true;\n        clearInterval(this.interval);\n        this.button.innerHTML = 'Disabled';\n        this.button.style.color = 'red';\n    }\n}\n\n\n",i="\nclass Vector {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    plus(other) {\n        return new Vector(this.x + other.x, this.y + other.y);\n    }\n}",o="\nvar directions = {\n    n: new Vector(0, -1),\n    ne: new Vector(1, -1),\n    e: new Vector(1, 0),\n    se: new Vector(1, 1),\n    s: new Vector(0, 1),\n    sw: new Vector(-1, 1),\n    w: new Vector(-1, 0),\n    nw: new Vector(-1, -1)\n};\n",c="\nclass Grid {\n    constructor(width, height) {\n        this.space = new Array(width * height);\n        this.width = width;\n        this.height = height;\n    }\n    isInside(vector) {\n        return (\n            vector.x >= 0 &&\n            vector.x < this.width &&\n            vector.y >= 0 &&\n            vector.y < this.height\n        );\n    }\n    get(vector) {\n        return this.space[vector.x + this.width * vector.y];\n    }\n    set(vector, value) {\n        this.space[vector.x + this.width * vector.y] = value;\n    }\n    forEach(f, context) {\n        for (var y = 0; y < this.height; y++) {\n            for (var x = 0; x < this.width; x++) {\n                var value = this.space[x + y * this.width];\n                if (value !== null) {\n                    f.call(context, value, new Vector(x, y));\n                }\n            }\n        }\n    }\n}\n",d="\nfunction randomElement(array) {\n    return array[Math.floor(Math.random() * array.length)];\n}\n\nfunction elementFromChar(legend, ch) {\n    if (ch === ' ') {\n        return null;\n    }\n    var element = new legend[ch]();\n    element.originChar = ch;\n    return element;\n}\n\nfunction charFromElement(element) {\n    if (element === null) {\n        return ' ';\n    }\n    return element.originChar;\n}\n",a="\nclass World {\n    constructor(map, legend) {\n        var grid = new Grid(map[0].length, map.length);\n        this.grid = grid;\n        this.legend = legend;\n        map.forEach(function(line, y) {\n            for (var x = 0; x < line.length; x++) {\n                grid.set(new Vector(x, y), elementFromChar(legend, line[x]));\n            }\n        });\n    }\n    toString() {\n        var output = '';\n        for (var y = 0; y < this.grid.height; y++) {\n            for (var x = 0; x < this.grid.width; x++) {\n                var element = this.grid.get(new Vector(x, y));\n                output += charFromElement(element);\n            }\n            output += '\\n';\n        }\n        return output;\n    }\n    turn() {\n        var acted = [];\n        this.grid.forEach(function(critter, vector) {\n            if (critter.act && acted.indexOf(critter) == -1) {\n                acted.push(critter);\n                this.letAct(critter, vector);\n            }\n        }, this);\n    }\n    letAct(critter, vector) {\n        var action = critter.act(new View(this, vector));\n        if (action && action.type === 'move') {\n            var dest = this.checkDestination(action, vector);\n            if (dest && this.grid.get(dest) === null) {\n                this.grid.set(vector, null);\n                this.grid.set(dest, critter);\n            }\n        }\n    }\n    checkDestination(action, vector) {\n        if (directions.hasOwnProperty(action.direction)) {\n            var dest = vector.plus(directions[action.direction]);\n            if (this.grid.isInside(dest)) {\n                return dest;\n            }\n        }\n        return false;\n    }\n}\n",s="\nclass View {\n    constructor(world, vector) {\n        this.world = world;\n        this.vector = vector;\n    }\n    look(dir) {\n        var target = this.vector.plus(directions[dir]);\n        if (this.world.grid.isInside(target)) {\n            return charFromElement(this.world.grid.get(target));\n        }\n        return '#';\n    }\n    findAll(ch) {\n        var found = [];\n        for (var dir in directions) {\n            if (this.look(dir) === ch) {\n                found.push(dir);\n            }\n        }\n        return found;\n    }\n    find(ch) {\n        var found = this.findAll(ch);\n        if (found.length === 0) return null;\n        return randomElement(found);\n    }\n}\n",l="\nclass BouncingCritter {\n    constructor() {\n        this.direction = randomElement(Object.keys(directions));\n    }\n    act(view) {\n        if (view.look(this.direction) !== ' ') {\n            this.direction = view.find(' ') || 's';\n        }\n        return { type: 'move', direction: this.direction };\n    }\n}\nclass Wall {}\nvar directionNames = Object.keys(directions);\nfunction dirPlus(dir, n) {\n    var index = directionNames.indexOf(dir);\n    return directionNames[(index + n + 8) % 8];\n}\n",u="var plan = [\n    '############################################################',\n    '#      #    #                                      o      ##',\n    '#                                                          #',\n    '#          #####      #####                                #',\n    '##         #   #           ####                         ## #',\n    '###           ##               ##                    #     #',\n    '#           ###                 #                    #     #',\n    '#   ####                        #                          #',\n    '#   ##       o                                             #',\n    '# o  #         o                                       ### #',\n    '#                                                          #',\n    '#                                                          #',\n    '#                                                          #',\n    '#                            =                             #',\n    '#                         ######                           #',\n    '#                                                          #',\n    '#                                                          #',\n    '#                                                          #',\n    '#                                                          #',\n    '#         =                                                #',\n    '############################################################'\n]";var p=window.ace.edit("editor");function h(){var e=document.getElementById("result");e&&e.remove();var n=document.createElement("iframe");n.id="result",document.body.appendChild(n);var t=n.contentWindow.document;t.open(),t.write("<div>jopa</div>"),t.open(),t.write("<div>jopa</div>"),t.write("<script>"+r+i+o+c+d+a+s+l+"<\/script>"),t.write("<script>"+p.getValue()+"<\/script>"),t.write("<script>"+u+"<\/script>"),t.write("<script>var world = new World(plan, {\n    '#': Wall,\n    o: BouncingCritter,\n    '=': WallFollower\n});<\/script>"),t.write("<script>new Animated(world)<\/script>"),t.close()}p.setTheme("ace/theme/dracula"),p.session.setMode("ace/mode/javascript"),document.getElementById("save").addEventListener("click",h),document.addEventListener("keydown",function(e){e.ctrlKey&&83===e.keyCode&&(e.preventDefault(),h())})}]);
//# sourceMappingURL=app.bundle.js.map